{"mappings":"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","sources":["src/js/controller.js"],"sourcesContent":["const API_KEY = 'fa44fa6c-502e-4624-9e90-2f4c108b8361';\nconst recipeContainer = document.querySelector('.recipe');\n\nconst searchInput = document.querySelector('.search__field');\nconst searchBtn = document.querySelector('.search__btn');\nconst searchResultsDiv = document.querySelector('.results');\n\nconst addRecipeBtn = document.querySelector('.nav__btn--add-recipe');\nconst addRecipeDiv = document.querySelector('.add-recipe-window');\nconst addRecipeCloseBtn = document.querySelector('.btn--close-modal');\n\nconst figureDisplay = document.querySelector('.recipe__fig');\nconst recipeDetailsDisplay = document.querySelector('.recipe__details');\nconst recipeIngredientsDisplay = document.querySelector(\n  '.recipe__ingredient-list'\n);\nconst recipeDirectionsDisplay = document.querySelector('.recipe__directions');\n\nconst timeout = function (s) {\n  return new Promise(function (_, reject) {\n    setTimeout(function () {\n      reject(new Error(`Request took too long! Timeout after ${s} second`));\n    }, s * 1000);\n  });\n};\n\n// https://forkify-api.herokuapp.com/v2\n\n///////////////////////////////////////\n\nlet searchResult;\n\n// Hide the recipe main display. Until the value is received.\nconst changeOpacity = function (val) {\n  figureDisplay.style.opacity = val;\n  recipeDetailsDisplay.style.opacity = val;\n  recipeIngredientsDisplay.style.opacity = val;\n  recipeDirectionsDisplay.style.opacity = val;\n};\n\nchangeOpacity(0);\n\nconst getData = async function (item) {\n  try {\n    const res = await fetch(\n      `https://forkify-api.herokuapp.com/api/v2/recipes?search=${item}&key=${API_KEY}`\n    );\n\n    if (!res.ok) throw new Error('Failed to get data. Please try again!');\n\n    const data = await res.json();\n\n    const result = data.data.recipes;\n\n    if (result.length === 0)\n      throw new Error('Invalid search Term, please try again!');\n\n    return result;\n  } catch (err) {\n    alert(err);\n  }\n};\n\nconst renderSearchResults = function (searchResult) {\n  if (!searchResult) return;\n  searchResult.forEach(item => {\n    const li = document.createElement('li');\n    li.classList = 'preview';\n    li.innerHTML = ` \n            <a class=\"preview__link preview__link--active\" href=\"#23232\" data-id=${item.id}>\n              <figure class=\"preview__fig\">\n                <img src=${item.image_url} alt=\"Test\" />\n              </figure>\n              <div class=\"preview__data\">\n                <h4 class=\"preview__title\">${item.title}</h4>\n                <p class=\"preview__publisher\">${item.publisher}</p>\n              </div>\n            </a>\n           `;\n    searchResultsDiv.appendChild(li);\n  });\n};\n\nconst getRecipeDetails = async function (id) {\n  try {\n    const res = await fetch(\n      `https://forkify-api.herokuapp.com/api/v2/recipes/${id}`\n    );\n\n    if (!res.ok) throw new Error(`Failed to get recipe: ${res.status}`);\n\n    const data = await res.json();\n\n    return data;\n  } catch (err) {\n    alert(err);\n    return null;\n  }\n};\n\nconst renderFinalRecipe = function (recipe) {\n  changeOpacity(100);\n\n  figureDisplay.innerHTML = `\n  \n          <img src=\"${recipe.image_url}\" alt=\"${recipe.title}\" class=\"recipe__img\" />\n          <h1 class=\"recipe__title\">\n            <span>${recipe.title}</span>\n          </h1>\n  `;\n\n  recipeDetailsDisplay.innerHTML = `\n  \n          <div class=\"recipe__info\">\n            <svg class=\"recipe__info-icon\">\n              <use href=\"src/img/icons.svg#icon-clock\"></use>\n            </svg>\n            <span class=\"recipe__info-data recipe__info-data--minutes\">${recipe.cooking_time}</span>\n            <span class=\"recipe__info-text\">minutes</span>\n          </div>\n          <div class=\"recipe__info\">\n            <svg class=\"recipe__info-icon\">\n              <use href=\"src/img/icons.svg#icon-users\"></use>\n            </svg>\n            <span class=\"recipe__info-data recipe__info-data--people\">${recipe.servings}</span>\n            <span class=\"recipe__info-text\">servings</span>\n\n            <div class=\"recipe__info-buttons\">\n              <button class=\"btn--tiny btn--increase-servings\">\n                <svg>\n                  <use href=\"src/img/icons.svg#icon-minus-circle\"></use>\n                </svg>\n              </button>\n              <button class=\"btn--tiny btn--increase-servings\">\n                <svg>\n                  <use href=\"src/img/icons.svg#icon-plus-circle\"></use>\n                </svg>\n              </button>\n            </div>\n          </div>\n\n          <div class=\"recipe__user-generated\">\n            <svg>\n              <use href=\"src/img/icons.svg#icon-user\"></use>\n            </svg>\n          </div>\n          <button class=\"btn--round\">\n            <svg class=\"\">\n              <use href=\"src/img/icons.svg#icon-bookmark-fill\"></use>\n            </svg>\n          </button>\n  `;\n  // putting this last because other ones are appeneded and this one is selected\n  recipe.ingredients.forEach(ingredient => {\n    const li = document.createElement('li');\n    li.classList.add('recipe__ingredient');\n    li.innerHTML = `\n              <svg class=\"recipe__icon\">\n                <use href=\"src/img/icons.svg#icon-check\"></use>\n              </svg>\n              <div class=\"recipe__quantity\">${ingredient.quantity}</div>\n              <div class=\"recipe__description\">\n                <span class=\"recipe__unit\">${ingredient.unit}</span>\n                ${ingredient.description}\n              </div>\n    `;\n\n    recipeIngredientsDisplay.appendChild(li);\n  });\n\n  recipeDirectionsDisplay.innerHTML = `\n  <h2 class=\"heading--2\">How to cook it</h2>\n          <p class=\"recipe__directions-text\">\n            This recipe was carefully designed and tested by\n            <span class=\"recipe__publisher\">${recipe.publisher}</span>. Please check out\n            directions at their website.\n          </p>\n          <a\n            class=\"btn--small recipe__btn\"\n            href=\"${recipe.source_url}\"\n            target=\"_blank\"\n          >\n            <span>Directions</span>\n            <svg class=\"search__icon\">\n              <use href=\"src/img/icons.svg#icon-arrow-right\"></use>\n            </svg>\n          </a>\n  `;\n};\n\n/*\nconst renderError = function (error) {\n  recipeContainer.innerHTML = '';\n  const div = document.createElement('div');\n  div.classList = 'error';\n  div.innerHTML = `\n            <div>\n              <svg>\n                <use href=\"src/img/icons.svg#icon-alert-triangle\"></use>\n              </svg>\n            </div>\n            <p>${error}</p>`;\n  recipeContainer.appendChild(div);\n}; */\n\nconst getFinalRecipe = async function (target) {\n  // Traverse up to find the closest <a> element\n  while (target && target.tagName !== 'A') {\n    target = target.parentElement;\n  }\n\n  if (target && target.dataset.id) {\n    const id = target.dataset.id;\n    const data = await getRecipeDetails(id);\n    if (data) {\n      const finalRecipe = data['data']['recipe'];\n      console.log(finalRecipe);\n      renderFinalRecipe(finalRecipe);\n    }\n  } else {\n    console.error('<a> has no data-id attribute');\n  }\n};\n\nsearchBtn.addEventListener('click', async function (e) {\n  e.preventDefault();\n  const searchValue = searchInput.value.trim();\n  if (searchValue === '') return alert('Search field cannot be empty.');\n\n  try {\n    searchResult = await getData(searchValue);\n\n    // Clean search render before rendering new one\n    searchResultsDiv.innerHTML = '';\n    renderSearchResults(searchResult);\n  } catch (err) {\n    console.error(err);\n  }\n});\n\naddRecipeBtn.addEventListener('click', () => {\n  addRecipeDiv.classList.remove('hidden');\n});\n\naddRecipeCloseBtn.addEventListener('click', () => {\n  addRecipeDiv.classList.add('hidden');\n});\n\nsearchResultsDiv.addEventListener('click', e => {\n  e.preventDefault();\n  getFinalRecipe(e.target);\n});\n"],"names":[],"version":3,"file":"index.62406edb.js.map","sourceRoot":"/__parcel_source_root/"}